

Не все понимают разницу между сущностью доктрины и ддд сущностью
Anton Marin 9:15 PM
етить
а это мысль
Dmitry Kuznetsov 9:15 PM
Я щас с этим столкнулся в команде
Anton Marin 9:15 PM
Я тут недавно с чуваком одним разгонял "Зачем нужна архитектура" )))
Dmitry Kuznetsov 9:16 PM
Норм холивар)
Anton Marin 9:17 PM
Даже не так. "Зачем нужна и какую архитектуру можно считать хорошей" )))
Во!
Ну кстати холивара не было
Dmitry Kuznetsov 9:17 PM
Видимо потому что он не адепт какого то определенного подхода)
Anton Marin 9:17 PM
В деталях немного разошлись, а суть понимаем одинакого)))
Вот ты как считаешь, зачем нужны архитектурные соглашения?
Dmitry Kuznetsov 9:18 PM
Любые соглашения нужны лишь для одной цели - чтобы делать одинаково)
Чтобы понимание было общим
Anton Marin 9:19 PM
Логично. А зачем делать одинаково?
А что дает общее понимание?
Dmitry Kuznetsov 9:19 PM
Чтобы снизить затраты
И издержки на коммуникации
Anton Marin 9:20 PM
:point_up:
дада
блин
мне кажется я не подходящим людям задаю эти вопросы :grin:
Dmitry Kuznetsov 9:20 PM
:grin:
Anton Marin 9:20 PM
даже не похоливаришь ))))
О!
Ща будет наброс
Dmitry Kuznetsov 9:21 PM
Жги
Anton Marin 9:21 PM
Каким будет самое важное свойство хорошей(ну или подходящей) архитектуры?
Dmitry Kuznetsov 9:23 PM
Если говорить в разрезе издержек на коммуникации, то отсутствие необходимости лазить в документацию по любому поводу))
Anton Marin 9:24 PM
:thinking_face: А если добавить что издержек на коммуникации с бизнесом? (edited) 
ну и кажется странно звучит свойство "отсутствие необходимости лазить в документацию по любому поводу", не? (edited) 
Dmitry Kuznetsov 9:25 PM
Юбикьютус лэнгуич
Anton Marin 9:25 PM
Гы
ну да
я это интуитивностью называю
Точно не те люди )))
Dmitry Kuznetsov 9:25 PM
Да, хорошее определение
Anton Marin 9:26 PM
нужно искать еще кого то))
Dmitry Kuznetsov 9:26 PM
Тут другой момент)
Многие могут понимать
Но не все будут так делать
Anton Marin 9:28 PM
:thinking_face: интересно. То есть ты хочешь сказать, что человек, понимая сколько времени/нервов экономит на коммуникации, все равно может не стремиться к этому? Или имеешь ввиду не уметь так делать?
Dmitry Kuznetsov 9:29 PM
Скорее не до конца понимает
А ещё есть сопротивление и давление
Anton Marin 9:29 PM
епать. вот ты накинул)))
Что значит "не до конца" ? Чье сопротивление? От кого давление?
Dmitry Kuznetsov 9:31 PM
Ну представь, ты не до конца понимаешь концепцию, на тебя давит бизнес : давай быстрее, давай быстрее
Фича нужна вчера
Anton Marin 9:32 PM
Тогда странно что ты полез ее внедрять, разве нет?
Dmitry Kuznetsov 9:32 PM
А ещё есть сопротивление- я всегда так делал и нормально было, зачем этот заморочь
Anton Marin 9:32 PM
А вот это уже противоречит даже "не до конца" (edited) 
Dmitry Kuznetsov 9:32 PM
Ну это разные причины)
Anton Marin 9:32 PM
))
В принципе мы же не в контексте внедрения обсуждаем, так что да, такое конечно тоже бывает
Dmitry Kuznetsov 9:33 PM
Ты пришел в команду где всегда писали крад-приложения и жирные контроллеры
А теперь ты предлагаешь создавать кучу файлов
Anton Marin 9:33 PM
ага
Просто перед тем как такое внедрять много подготовить ж нужно
Dmitry Kuznetsov 9:34 PM
Конечно
Anton Marin 9:34 PM
а не "Ковбои захватили прерию, теперь плодим классы" )))
Dmitry Kuznetsov 9:34 PM
Норм подход))
Anton Marin 9:34 PM
:joy:
бывает и так, да
Только нужна ли при этом архитектура?
Dmitry Kuznetsov 9:35 PM
Это тоже архитектура)
Anton Marin 9:35 PM
И не поспоришь)))
Dmitry Kuznetsov 9:38 PM
Ну и опять же, классический ддд, в его общем понимание везде совать не стоит
А использовать слоеную архитектуру норм)
Anton Marin 9:39 PM
а что такое "классический ддд"?
Dmitry Kuznetsov 9:39 PM
Разработка от предметной области
Anton Marin 9:41 PM
ну у ддд есть определенная задача и там где эта задача есть, то туда и стоит. Естественно это не везде. Это как на все автомобили ставить V8. Будет странно сесть за руль Toyota Prius V8
Dmitry Kuznetsov 9:41 PM
Ага
Даже там, где его можно использовать нужно его использовать аккуратно, потому что реальный мир гораздо сложнее, чем то, что мы кодом можем описать
Anton Marin 9:43 PM
ну вот и до холивара добрались
давай подробностей )))
Dmitry Kuznetsov 9:44 PM
Ддд многословный и из него вырастают огромные приложения, которые хоть и написаны хорошо, но очень сложно читаются
Особенно, если содержат много контекстов
Anton Marin 9:44 PM
что ты подразумеваешь под многословносттью?
Возьмем простейший сценарий блога с двумя контекстами
Dmitry Kuznetsov 9:46 PM
Блог ладно
Anton Marin 9:46 PM
а куда проще то?
Dmitry Kuznetsov 9:46 PM
В том то и дело, что это простой сценарий
Anton Marin 9:46 PM
ну в смысле в моем понимании блог с двумя контекстами это 2 сценария, 2 сущности и 2 контролллера
без доменного языка уберется максимум 1 класс сущности
Ну в более сложном я не вижу большого увеличения.
Просто многие ставят тактику раньше стратегии и начинается вот это вот. Для вывода поста 15 классов
Хочу понять не об этом ли ты говоришь
Dmitry Kuznetsov 9:49 PM
Да, об этом
Anton Marin 9:50 PM
Ну вот это не про ддд))) Хотя это очень часто встречается
ддд ж тоже из аджайла. А там KISS ))
Для соблюдения языка не так много и нужно
https://github.com/antonmarin/php-skeleton/tree/master/src
набрасываю)))
Dmitry Kuznetsov 10:01 PM
Да, понятно, что есть множество хороших походов) доменная область может быть предельно простой, но мы же говорим про приложение в целом, а там и получается, что для простого блога будет сотня классов
Anton Marin 10:02 PM
Кажется это вызов )))
Dmitry Kuznetsov 10:02 PM
И конкретно ддд тут никак не поможет избежать этой многословности
Anton Marin 10:02 PM
это точно
Dmitry Kuznetsov 10:03 PM
Единственный способ, который я для себя нашел делать приложения более понятными и простыми - аккуратно разрезать их на сервисы
Чтобы было не очень много кода в рамках одного проекта
Но тут есть свои минусы
Anton Marin 10:04 PM
Кажется скайэнг тоже так думал))
Dmitry Kuznetsov 10:04 PM
Ну просто они изолированы плохо
Anton Marin 10:04 PM
Как ты и сказал "есть свои минусы"
Dmitry Kuznetsov 10:05 PM
Тут как и в ддд требуется определенный уровень
Уровень компетенции сотрудников
Если у сервисов апи незадокумментировано, то чего тут ожидать
Запросы без таймаутов, если один запрос нагнулся, то все пропало, и не важно, что страницу можно нарисовать и без этого
Мониторить приложения тоже не все умеют)
Хотя казалось бы - нужно знать работаем сейчас или лежим
Сегодня один тимлид спросил что такое кубер и сворм
Понятно, что все инструменты знать не надо, но как минимум стоит интересоваться, что другие используют
Anton Marin 10:11 PM
:thinking_face:



Мой любимый вопрос «зачем». Как думаешь, зачем нужна архитектура?
Denis Rudenko:fire: 8:05 PM
для быстрых прогнозируемых изменений кода?
Anton Marin 8:05 PM
Без деталей. В двух словах
Denis Rudenko:fire: 8:05 PM
для быстрых прогнозируемых изменений кода?
ну не изменения, а добавления нового поведения
Anton Marin 8:06 PM
Прогнозируемых = интуитивных?
Если нет, то мне тогда немножко помощь нужна чтобы понять ответ
Denis Rudenko:fire: 8:08 PM
интуитивных - даже не знаю.
Одна из задач, чтоб сверху было примерно понятно что происходит и чем занимается проект
поэтому наверное ответ - да
Anton Marin 8:09 PM
Ну скорее да чем нет, ага. Тогда каким будет самое важное ее качество?
Denis Rudenko:fire: 8:11 PM
ну я вижу самым главным качеством архитектуры - это возможность быстро внедрить или изменить фичу для заказчика с минимальными изменениями
т.е. если мы строим какое-то здоровенное здание
Anton Marin 8:12 PM
Я бы назвал это целью.
И не только архитектуры )))
Denis Rudenko:fire: 8:12 PM
пользоваться которым будут для работы, чтоб пожить, чтоб поиграть.
Чтоб когда те, кто пришел к нам поиграть, не захотели добавить футбольную площадку
И если в результате таких изменений в переговорке стоят ворота
то значит архитектура не очень
Anton Marin 8:15 PM
)) клевая метафора. А что в ней не очень?  Цель достигнута и быстро
Сломалась вторая часть)) интуитивность
Denis Rudenko:fire: 8:16 PM
в результате достижения цель для одного заказчика, мы не намеренно изменили части другого заказчика
Это результат связывания
Anton Marin 8:17 PM
Это тоже, но если это обоих устроило то все ок ))
Я считаю самым важным качеством именно интуитивность
Denis Rudenko:fire: 8:17 PM
Не, это не планируемые изменения
Anton Marin 8:18 PM
:grin: можно и так назвать
В общем про интуитивность. А что такое интуиция?
Denis Rudenko:fire: 8:18 PM
Я считаю одной из главной вещей в архитектуре все же предсказуемость
Anton Marin 8:19 PM
Ага. И мы выяснили ранее что это суть одно. Если хочешь, могу использовать предсказуемость, но будет чуть дольше))
Denis Rudenko:fire: 8:20 PM
Ты клонишь к тому, что слова собираются в образы, образы в классы, классы в архитектуру и таким образом читая когда-то слова ты интуитивно чувствуешь код?
Anton Marin 8:20 PM
Ну не совсем))
А может и совсем Не)
Интуиция это по сути опыт
Точнее решения принимаемые на его основе
Denis Rudenko:fire: 8:21 PM
Согласен
Anton Marin 8:22 PM
Только вот нюанс: опыт разработки у всех разный, а нужно чтобы всем было одинаково интуитивно. Что делать?
Denis Rudenko:fire: 8:22 PM
Использовать один описанный :smile:
Anton Marin 8:23 PM
)))) можно и так. Пробовал когда нибудь синхронизировать опыт с кем нибудь? Например убедить кондуктора что ты расплатишься в конце поездки )))
Или еще какого злобного упертого в том, что тебе можно доверять
Denis Rudenko:fire: 8:24 PM
тяжело его синхронизировать если каждому пытаться угодить
Anton Marin 8:24 PM
Ага.
Denis Rudenko:fire: 8:24 PM
а если один чувак говорит как надо и все делают
Anton Marin 8:25 PM
Есть другие варианты?
Чуваки меняются. Что делать когда он сменится?
Denis Rudenko:fire: 8:26 PM
Другого взять)
Власть меняется, векторы развития менняются
Это закон бытия
Anton Marin 8:29 PM
Перепишем архитектуру? Долгоо дорого. Бизнес финансировать не будет. А так как принципы никто не знает - привет легаси и не интуитивный код.
Вспомни что ты делаешь в приложении чтобы сохранить данные
Denis Rudenko:fire: 8:31 PM
А почему ты решил что первая была не интуитивная?
Просто может новый человек по своему поймет ее
и так как интуитивность штука субъективная
Мы изначально получаем интуитивность одного !== интуитивности другого
А это прям указывает на проблему
Лучше тогда сказать, что архитектура должна следовать каким-то законам (edited) 
Anton Marin 8:34 PM
Выносишь))
Вот и тут так же. Опыт нужно вынести в откзоустойчивое хранилище
Оу. Фига у меня связь пропала )))
Denis Rudenko:fire: 8:38 PM
))
Anton Marin 8:39 PM
А я не решал что она не была интуитивной. Более того, я от этого отталкивался. Дальнейшие события ты описал абсолютно верно.
А законы описать)) И возвращаемся к нашей первой попытке
Denis Rudenko:fire: 8:41 PM
Хорошо, тогда какие законы из твоего опыта должна содержать архитектура?
Anton Marin 8:41 PM
никаких)
вынести в откзоустойчивое хранилище
А что этим может быть в контексте опыта?
Подсказка: За что тебе платят?
Denis Rudenko:fire: 8:42 PM
за реализацию потребностей бизнеса :smile:
Anton Marin 8:44 PM
Ну почти ))
но это детали. Этого достаточно чтобы понять что есть наше хранилище
Denis Rudenko:fire: 8:45 PM
Нихрена не понимаю :smile:
Anton Marin 8:46 PM
Чтобы архитектура была интуитивна, ее следует строить от того как устроен бизнес
Если быть точнее, то коммуникации в бизнесе))
Закон Конвея. Но это детали
В такой ситуации архитектура станет не актуальной только тогда, когда сдохнет направление в бизнесе
Но если направление сдохло, то код становится не поддерживаемым или его можно выкинуть
Так вот к вопросу о компонентах
))
Denis Rudenko:fire: 8:49 PM
Это все хорошо, но не гарантирует главную потребность бизнеса - быстрое изменение системы
толку от единого языка
Anton Marin 8:49 PM
Компонент - самый верхний уровень в структуре нашего приложения. А раз структура идет от бизнеса, то возникает вопрос: А что у нас верхний уровень в бизнесе
Гарантирует
Ух
давно такие темы не обсуждал. зачерствел немного))
Если быть точным, это способствует отсутствию фрикций при загрузке контекста
потому как скорость изменений системы это не только разработка
Про контекст: Не задумывался из чего состоит решение проблемы?
Denis Rudenko:fire: 8:53 PM
Не, как-то слишком абстрактно
Anton Marin 8:59 PM
Тогда в этом вопросе не будем разгонять))
Мы сначала разбираем ее суть. Я это называю загрузкой контекста. Возможно и не я вовсе, а забыл откуда взял, но сути не меняет.
После того как мы осознаем проблему, мы переходим к проверке гипотезы. Здесь мы ищем предполагаем решение этой проблемы.
Затем этап дизайна. Накидываем решение
И под конец это пишем.
Кто то провел исследование. Толи Майкрософт, толи оракл эти обычно что то такое делают. И в итоге выяснили что среднее количество времени, которое уходит на загрузку контекста чет около 65%. При этом это средняя температура по палате. То есть в результатах есть как и приверженцы XP, так и проекты с огромным техдолгом.
Вот и получаем, что за счет крайне низкого времени загрузки контекста (здесь ответ на вопрос "а как это вообще сейчас работает") мы сильно бустим не только скорость, но и простоту решений
Denis Rudenko:fire: 9:05 PM
Хорошо, это понятно.
Но ведь не код может выступать как загрузка контектста
Лучше чтоб этим занимались тесты
Тогда мы можем единый язык перенести в тесты, когда код сделать более абстрактным
Anton Marin 9:06 PM
В теории да, но так ты все равно получишь слой "переводчик". Поговорил с бизнесом -> пошел переводить -> нашел в тестах -> пошел в код
А когда ты говоришь на одном языке, ты загружаешь контекст в процессе диалога
Denis Rudenko:fire: 9:07 PM
Да, но тогда людям, которые не впервые в проекте, и контекст проектной абстракции у него загружен, изменения в коде становятся значительно быстрее
Anton Marin 9:07 PM
это еще и целостность помогает сохранять
Покажи мне хоть одного человека, который знает контекст всего бизнеса начиная от среднего и держит его в голове и я поставлю тебе бутылку хорошего вискаря
Denis Rudenko:fire: 9:09 PM
Нет-нет. Бизнес у нас в тестах описан
но код у нас более абстрактный
Anton Marin 9:21 PM
)) ну хорошо
вот представь себе ситуацию
фраза бизнеса "Теперь Услуга не может быть оплачена без модерации" в каком классе этот функционал?
Denis Rudenko:fire: 9:23 PM
Теперь ты пишешь тест, который не пройдет это условие
Anton Marin 9:23 PM
Хотя похоже что очень простой вопрос))
Denis Rudenko:fire: 9:23 PM
и заставляешь его работать
Anton Marin 9:23 PM
)))))
Ага. И он заставляет тебя переписать 15 классов. Знакомо?
Denis Rudenko:fire: 9:26 PM
Вот это знакомо, когда у тебя код не соблюдает законы
Если мы представим, что у нас каждый класс имеют 1 причину для изменений, тогда такого кейса никогда не будет
Anton Marin 9:28 PM
Ага. Помнишь мой вопрос про "Refuser" ?
Denis Rudenko:fire: 9:28 PM
Reducer?
Anton Marin 9:28 PM
дадада точно
Denis Rudenko:fire: 9:28 PM
Угу, а какой вопрос?
Anton Marin 9:28 PM
почему так назвал
Denis Rudenko:fire: 9:29 PM
Так мы берем сейчас ситуацию, когда у нас есть тесты
Потому-что этот интерфейс создавался чтоб уменьшить кол-во коммуникаций
Anton Marin 9:30 PM
ну сути то не меняет. Тест тебе не даст интуитивного кода. Он только его зафиксирует и подскажет когда зависимость нужно выделять
А вот в какой тест посмотреть тебе что скажет?
Или будешь все 8000 тестов перечитывать?
Denis Rudenko:fire: 9:36 PM
В какой тест посмотреть, скажет ровно то, что сказало бы тебе, куда смотреть в коде
Anton Marin 9:37 PM
именно
поэтому не имеет смысла делать только одно
Denis Rudenko:fire: 9:39 PM
Нет, я тебе говорю, делая такими тесты, зачем копировать это в код?
Суть в чем.
С развитием кода, тесты становятся более специфичны, когда код более абстрактным
Абстрактным он как раз становится, чтоб поддерживать быстрые и контролируемые изменения
Anton Marin 9:40 PM
)) ну давай разгоним)) Про какие тесты мы говорим?
Anton Marin 10:10 PM
Все?
Denis Rudenko:fire: 10:17 PM
Сорян, отходил
Я понял, что одно другому не мешает
абстрактный код не означает отсутсвие UL
Anton Marin 10:18 PM
Это точно
Ну и «чистую выдумку» никто не отменял
